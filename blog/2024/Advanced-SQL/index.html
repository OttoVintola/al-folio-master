<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Advanced SQL and Query Optimization | Otto Vintola </title> <meta name="author" content="Otto Vintola"> <meta name="description" content="What I learned about SQL and making queries run faster and more sustainably than before"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://ottovintola.github.io/blog/2024/Advanced-SQL/"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?0afe9f0ae161375728f7bcc5eb5b4ab4"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Otto</span> Vintola </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">courses/teaching </a> </li> <li class="nav-item "> <a class="nav-link" href="/books/">books </a> </li> <li class="nav-item "> <a class="nav-link" href="/photos/">photos </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Advanced SQL and Query Optimization</h1> <p class="post-meta"> February 26, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/sql"> <i class="fa-solid fa-hashtag fa-sm"></i> SQL</a>   <a href="/blog/tag/sustainability"> <i class="fa-solid fa-hashtag fa-sm"></i> Sustainability</a>     ·   <a href="/blog/category/databases"> <i class="fa-solid fa-tag fa-sm"></i> Databases</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <h2 id="introduction">Introduction</h2> <p>Recently, I’ve been studying SQL for some data engineering tasks. I came across a course that mentioned about using Arrays – which I did not even know existed in SQL, additionally, there were ideas and best practices about how to make queries more efficient. I knew that most database systems have <strong>query optimizers</strong> that attempt to interpret/execute the query efficiently, but there were some strategies that could still make a massive impact on the performance of the query.</p> <p><br></p> <h2 id="nested-data">Nested Data</h2> <p>Lets imagine a hypothetical dataset that has the information about people and their jobs. The data is stored in two tables called <code class="language-plaintext highlighter-rouge">Employees</code> and the columns are <code class="language-plaintext highlighter-rouge">ID</code>, <code class="language-plaintext highlighter-rouge">Name</code>, <code class="language-plaintext highlighter-rouge">Age</code>, and then there is another table called <code class="language-plaintext highlighter-rouge">Information</code> with columns <code class="language-plaintext highlighter-rouge">JobID</code>, <code class="language-plaintext highlighter-rouge">Job</code> and <code class="language-plaintext highlighter-rouge">Tasks</code>. The <code class="language-plaintext highlighter-rouge">JobID</code> is a foreign key that references the <code class="language-plaintext highlighter-rouge">ID</code> in the <code class="language-plaintext highlighter-rouge">people</code> table.</p> <p><strong>Employees Table</strong></p> <table> <thead> <tr> <th style="text-align: left">ID</th> <th style="text-align: left">Name</th> <th style="text-align: left">Age</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">101</td> <td style="text-align: left">John</td> <td style="text-align: left">45</td> </tr> <tr> <td style="text-align: left">42</td> <td style="text-align: left">Jack</td> <td style="text-align: left">35</td> </tr> <tr> <td style="text-align: left">89</td> <td style="text-align: left">Jill</td> <td style="text-align: left">58</td> </tr> </tbody> </table> <p><br></p> <p><strong>Information Table</strong></p> <table> <thead> <tr> <th style="text-align: left">JobID</th> <th style="text-align: left">Job</th> <th style="text-align: left">Tasks</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">89</td> <td style="text-align: left">Software</td> <td style="text-align: left">Coding</td> </tr> <tr> <td style="text-align: left">42</td> <td style="text-align: left">Sales</td> <td style="text-align: left">Negotiating</td> </tr> <tr> <td style="text-align: left">101</td> <td style="text-align: left">Legal</td> <td style="text-align: left">Advise</td> </tr> </tbody> </table> <p><br></p> <p>We can either construct the tables like this, or we can use a nested column (a row inside of a row) to store the information. You can think of the row entry being used as a reference to more rows. The nested data structure would look like this:</p> <p><strong>Employees_Information</strong></p> <table> <thead> <tr> <th style="text-align: left">ID</th> <th style="text-align: left">Name</th> <th style="text-align: left">Age</th> <th style="text-align: left">Jobs</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">101</td> <td style="text-align: left">John</td> <td style="text-align: left">45</td> <td style="text-align: left">{Job: Legal, Tasks: Advise}</td> </tr> <tr> <td style="text-align: left">42</td> <td style="text-align: left">Jack</td> <td style="text-align: left">35</td> <td style="text-align: left">{Job: Sales, Tasks: Negotiating}</td> </tr> <tr> <td style="text-align: left">89</td> <td style="text-align: left">Jill</td> <td style="text-align: left">58</td> <td style="text-align: left">{Job: Software, Tasks: Coding}</td> </tr> </tbody> </table> <p><br> The nested data structure is more efficient because it reduces the number of joins that need to be performed. Additionally, it reduces the database schema complexity making it easier to understand and maintain.</p> <p>To extract the data from this nested structure, we can use a query like this:</p> <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">ID</span><span class="p">,</span> <span class="n">Name</span><span class="p">,</span> <span class="n">Age</span>
<span class="k">FROM</span> <span class="n">Employees_Information</span><span class="p">,</span>
    <span class="n">Jobs</span><span class="p">.</span><span class="n">Job</span> <span class="k">AS</span> <span class="n">Job</span><span class="p">,</span> <span class="n">Jobs</span><span class="p">.</span><span class="n">Tasks</span> <span class="k">AS</span> <span class="n">Task</span>
</code></pre></div></div> <p>Which would result in a table like this:</p> <table> <thead> <tr> <th style="text-align: left">ID</th> <th style="text-align: left">Name</th> <th style="text-align: left">Age</th> <th style="text-align: left">Job</th> <th style="text-align: left">Task</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">101</td> <td style="text-align: left">John</td> <td style="text-align: left">45</td> <td style="text-align: left">Legal</td> <td style="text-align: left">Advise</td> </tr> <tr> <td style="text-align: left">42</td> <td style="text-align: left">Jack</td> <td style="text-align: left">35</td> <td style="text-align: left">Sales</td> <td style="text-align: left">Negotiating</td> </tr> <tr> <td style="text-align: left">89</td> <td style="text-align: left">Jill</td> <td style="text-align: left">58</td> <td style="text-align: left">Software</td> <td style="text-align: left">Coding</td> </tr> </tbody> </table> <p><br></p> <h2 id="repeated-data">Repeated Data</h2> <p>Another a more realistic scenario is when we can have multiple tasks per job. In this scenario we can use an <code class="language-plaintext highlighter-rouge">Array</code> to store the tasks. The <code class="language-plaintext highlighter-rouge">Employees</code> table would look like this:</p> <p><strong>Employees_Information</strong></p> <table> <thead> <tr> <th style="text-align: left">ID</th> <th style="text-align: left">Name</th> <th style="text-align: left">Age</th> <th style="text-align: left">Job</th> <th style="text-align: left">Tasks</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">101</td> <td style="text-align: left">John</td> <td style="text-align: left">45</td> <td style="text-align: left">Legal</td> <td style="text-align: left">[Advise, Research]</td> </tr> <tr> <td style="text-align: left">42</td> <td style="text-align: left">Jack</td> <td style="text-align: left">35</td> <td style="text-align: left">Sales</td> <td style="text-align: left">[Negotiating, Marketing]</td> </tr> <tr> <td style="text-align: left">89</td> <td style="text-align: left">Jill</td> <td style="text-align: left">58</td> <td style="text-align: left">Software</td> <td style="text-align: left">[Coding, Testing]</td> </tr> </tbody> </table> <p><br> To extract the data from this array structure, we can use a query like this:</p> <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">ID</span><span class="p">,</span> <span class="n">Name</span><span class="p">,</span> <span class="n">Age</span><span class="p">,</span> <span class="n">Job</span><span class="p">,</span> <span class="n">Task</span>
<span class="k">FROM</span> <span class="n">Employees_Information</span><span class="p">,</span>
    <span class="k">UNNEST</span><span class="p">(</span><span class="n">Tasks</span><span class="p">)</span> <span class="k">AS</span> <span class="n">Task</span>
</code></pre></div></div> <p>From this query we would get a table like this:</p> <table> <thead> <tr> <th style="text-align: left">ID</th> <th style="text-align: left">Name</th> <th style="text-align: left">Age</th> <th style="text-align: left">Job</th> <th style="text-align: left">Task</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">101</td> <td style="text-align: left">John</td> <td style="text-align: left">45</td> <td style="text-align: left">Legal</td> <td style="text-align: left">Advise</td> </tr> <tr> <td style="text-align: left">101</td> <td style="text-align: left">John</td> <td style="text-align: left">45</td> <td style="text-align: left">Legal</td> <td style="text-align: left">Research</td> </tr> <tr> <td style="text-align: left">42</td> <td style="text-align: left">Jack</td> <td style="text-align: left">35</td> <td style="text-align: left">Sales</td> <td style="text-align: left">Negotiating</td> </tr> <tr> <td style="text-align: left">42</td> <td style="text-align: left">Jack</td> <td style="text-align: left">35</td> <td style="text-align: left">Sales</td> <td style="text-align: left">Marketing</td> </tr> <tr> <td style="text-align: left">89</td> <td style="text-align: left">Jill</td> <td style="text-align: left">58</td> <td style="text-align: left">Software</td> <td style="text-align: left">Coding</td> </tr> <tr> <td style="text-align: left">89</td> <td style="text-align: left">Jill</td> <td style="text-align: left">58</td> <td style="text-align: left">Software</td> <td style="text-align: left">Testing</td> </tr> </tbody> </table> <p><br> Note the difference thus between using a nested structure and arrays!</p> <p>It is also possible to have nested structures within arrays, and arrays within nested structures. This can be useful for storing complex data structures in a single column.</p> <p><br></p> <h2 id="query-optimization">Query Optimization</h2> <p>The three main strategies for optimizing queries that I recently learned are</p> <ol> <li>Only select columns needed/wanted</li> <li>Read less data</li> <li>Avoid N:N Joins</li> </ol> <p><br></p> <h4 id="1-only-select-columns-neededwanted">1. Only select columns needed/wanted</h4> <p>Usually it is tempting to just get everything with <code class="language-plaintext highlighter-rouge">SELECT * FROM ...</code> but this is not efficient if all of the columns are not required for the query/results. To highlight the difference consider these two following queries ran on the <a href="https://cloud.google.com/bigquery/public-data" rel="external nofollow noopener" target="_blank"><code class="language-plaintext highlighter-rouge">bigquery-public-data.github_repos.contents</code></a> table:</p> <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="nv">`bigquery-public-data.github_repos.contents
</span></code></pre></div></div> <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="k">size</span><span class="p">,</span> <span class="nb">binary</span> <span class="k">FROM</span> <span class="nv">`bigquery-public-data.github_repos.contents
</span></code></pre></div></div> <p>Data processed: 2682.118 GB <br> Data processed: 2.531 GB</p> <p><br></p> <h4 id="2-read-less-data">2. Read less data</h4> <p>This point seems obvious, however, it might not be as straightforward as it seems. The idea is to be parsimonius about what columns to include in the query. Avoid as hard as you can to include columns that are not needed. Well, how can you do that? If there is a column with a 1-to-1 relationship with another column, then you can exclude one of them and use the other. For example, if you have a column <code class="language-plaintext highlighter-rouge">Country</code> and another column <code class="language-plaintext highlighter-rouge">CountryCode</code> you can exclude one of them and this will effectively reduce the amount of data read.</p> <p>Consider the query below:</p> <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">Country</span><span class="p">,</span> <span class="n">Population</span><span class="p">,</span> <span class="n">GDP</span><span class="p">,</span> <span class="n">CountryCode</span>
<span class="k">FROM</span> <span class="n">CountryTable</span>
<span class="k">WHERE</span> <span class="n">CountryCode</span> <span class="o">=</span> <span class="s1">'US'</span>
</code></pre></div></div> <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">Country</span><span class="p">,</span> <span class="n">Population</span><span class="p">,</span> <span class="n">GDP</span>
<span class="k">FROM</span> <span class="n">CountryTable</span>
<span class="k">WHERE</span> <span class="n">Country</span> <span class="o">=</span> <span class="s1">'United States'</span>
</code></pre></div></div> <p>Since, the <code class="language-plaintext highlighter-rouge">CountryCode</code> and <code class="language-plaintext highlighter-rouge">Country</code> have a 1-to-1 correspondence, we can exclude one of them and use the other.</p> <p><br></p> <h4 id="3-avoid-nn-joins">3. Avoid N:N Joins</h4> <p>The idea here is to avoid joining tables that have a many-to-many relationship and instead separate the queries if possible, and then use an <code class="language-plaintext highlighter-rouge">INNER JOIN</code> to combine the results.</p> <p>The query ran on the <code class="language-plaintext highlighter-rouge">bigquery-public-data.github_repos</code> below shows the difference</p> <p>Slow</p> <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                 <span class="k">SELECT</span> <span class="n">repo</span><span class="p">,</span>
                     <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="k">c</span><span class="p">.</span><span class="n">committer</span><span class="p">.</span><span class="n">name</span><span class="p">)</span> <span class="k">as</span> <span class="n">num_committers</span><span class="p">,</span>
                     <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">f</span><span class="p">.</span><span class="n">id</span><span class="p">)</span> <span class="k">AS</span> <span class="n">num_files</span>
                 <span class="k">FROM</span> <span class="nv">`bigquery-public-data.github_repos.commits`</span> <span class="k">AS</span> <span class="k">c</span><span class="p">,</span>
                     <span class="k">UNNEST</span><span class="p">(</span><span class="k">c</span><span class="p">.</span><span class="n">repo_name</span><span class="p">)</span> <span class="k">AS</span> <span class="n">repo</span>
                 <span class="k">INNER</span> <span class="k">JOIN</span> <span class="nv">`bigquery-public-data.github_repos.files`</span> <span class="k">AS</span> <span class="n">f</span>
                     <span class="k">ON</span> <span class="n">f</span><span class="p">.</span><span class="n">repo_name</span> <span class="o">=</span> <span class="n">repo</span>
                 <span class="k">WHERE</span> <span class="n">f</span><span class="p">.</span><span class="n">repo_name</span> <span class="k">IN</span> <span class="p">(</span> <span class="s1">'tensorflow/tensorflow'</span><span class="p">,</span> <span class="s1">'facebook/react'</span><span class="p">,</span> <span class="s1">'twbs/bootstrap'</span><span class="p">,</span> <span class="s1">'apple/swift'</span><span class="p">,</span> <span class="s1">'Microsoft/vscode'</span><span class="p">,</span> <span class="s1">'torvalds/linux'</span><span class="p">)</span>
                 <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">repo</span>
                 <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">repo</span>             
</code></pre></div></div> <p>Fast</p> <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>             <span class="k">WITH</span> <span class="n">commits</span> <span class="k">AS</span>
                   <span class="p">(</span>
                   <span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">committer</span><span class="p">.</span><span class="n">name</span><span class="p">)</span> <span class="k">AS</span> <span class="n">num_committers</span><span class="p">,</span> <span class="n">repo</span>
                   <span class="k">FROM</span> <span class="nv">`bigquery-public-data.github_repos.commits`</span><span class="p">,</span>
                       <span class="k">UNNEST</span><span class="p">(</span><span class="n">repo_name</span><span class="p">)</span> <span class="k">as</span> <span class="n">repo</span>
                   <span class="k">WHERE</span> <span class="n">repo</span> <span class="k">IN</span> <span class="p">(</span> <span class="s1">'tensorflow/tensorflow'</span><span class="p">,</span> <span class="s1">'facebook/react'</span><span class="p">,</span> <span class="s1">'twbs/bootstrap'</span><span class="p">,</span> <span class="s1">'apple/swift'</span><span class="p">,</span> <span class="s1">'Microsoft/vscode'</span><span class="p">,</span> <span class="s1">'torvalds/linux'</span><span class="p">)</span>
                   <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">repo</span>
                   <span class="p">),</span>
                   <span class="n">files</span> <span class="k">AS</span> 
                   <span class="p">(</span>
                   <span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">id</span><span class="p">)</span> <span class="k">AS</span> <span class="n">num_files</span><span class="p">,</span> <span class="n">repo_name</span> <span class="k">as</span> <span class="n">repo</span>
                   <span class="k">FROM</span> <span class="nv">`bigquery-public-data.github_repos.files`</span>
                   <span class="k">WHERE</span> <span class="n">repo_name</span> <span class="k">IN</span> <span class="p">(</span> <span class="s1">'tensorflow/tensorflow'</span><span class="p">,</span> <span class="s1">'facebook/react'</span><span class="p">,</span> <span class="s1">'twbs/bootstrap'</span><span class="p">,</span> <span class="s1">'apple/swift'</span><span class="p">,</span> <span class="s1">'Microsoft/vscode'</span><span class="p">,</span> <span class="s1">'torvalds/linux'</span><span class="p">)</span>
                   <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">repo</span>
                   <span class="p">)</span>
                   <span class="k">SELECT</span> <span class="n">commits</span><span class="p">.</span><span class="n">repo</span><span class="p">,</span> <span class="n">commits</span><span class="p">.</span><span class="n">num_committers</span><span class="p">,</span> <span class="n">files</span><span class="p">.</span><span class="n">num_files</span>
                   <span class="k">FROM</span> <span class="n">commits</span> 
                   <span class="k">INNER</span> <span class="k">JOIN</span> <span class="n">files</span>
                       <span class="k">ON</span> <span class="n">commits</span><span class="p">.</span><span class="n">repo</span> <span class="o">=</span> <span class="n">files</span><span class="p">.</span><span class="n">repo</span>
                   <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">repo</span>      
                   
</code></pre></div></div> <p>The time difference is not significant for this particular query, but if we run it again and again, the difference will add up.</p> <p>Time to run: 13.028 seconds <br> Time to run: 4.413 seconds <br><br></p> <h2 id="conclusion">Conclusion</h2> <p>When I was first learning about SQL, it was in PostgreSQL, which famously does not have arrays built in, so I was quite surprised that they actually exist. Additionally, the idea of nesting data seems logical in order to keep the database schemas more simple – having to do a myriad of <code class="language-plaintext highlighter-rouge">JOIN</code> statements can make queries complex. Lastly, it is also important to track the performance of queries, especially if they are ran on a frequent bases, and attempt to optimize with these principles or just common sense. <br> <br> <br> <br></p> <h2 id="references">References</h2> <ol> <li> <a href="https://www.kaggle.com/learn/advanced-sql" rel="external nofollow noopener" target="_blank">Advanced SQL</a> by Alexis Cook on Kaggle</li> </ol> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Multilayer-Perceptrons/">Multilayer Perceptrons and Backpropagation</a> </li> </div> </div> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?2930004b8d7fcd0a8e00fdcfc8fc9f24"></script> <script defer src="/assets/js/common.js?da39b660470d1ba6e6b8bf5f37070b6e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>